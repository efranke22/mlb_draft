<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Erin Franke" />


<title>Tommy John Surgery and its Relationship to MLB Pitcher Career Trajectory</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">TJ Analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="content.html">Data Cleaning!</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Tommy John Surgery and its Relationship to MLB Pitcher Career Trajectory</h1>
<h4 class="author">Erin Franke</h4>

</div>


<pre class="r"><code>#load libraries and data
library(tidyverse)
library(lubridate)
library(readxl)
library(bayesrules)
library(tidyverse)
library(rstanarm)
library(broom.mixed)
library(tidybayes)
library(forcats)
library(bayesplot)
library(ggtext)
library(janitor)
library(gt)
library(tidymodels)
library(probably)
library(vip)
library(ggmosaic)
tidymodels_prefer()
`%!in%` &lt;- Negate(`%in%`)

seasonal_complete &lt;- read_csv(&quot;data/seasonal_complete.csv&quot;)</code></pre>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>A pitcher’s success can vary dramatically over the course of their major league career. 2015 Cy Young <a href="https://www.baseball-reference.com/players/a/arrieja01.shtml">Jake Arrieta</a> had tremendous success in the middle of his career, but began his career with the Orioles where he pitched at levels far below league average. In more recent seasons he has also struggled. To measure a pitcher’s success overtime, we might look at ERA+, which takes a player’s earned run average each season and normalizes it across the entire league. An ERA+ of 100 represents league average, 150 and 80 would respectively represent 50% better and 20% worse than league average. Despite many still considering Arrieta legendary, the quality of his pitching has been slowly declining since his Cy Young season it is clear his value to a team is not the same as it once was. Arrieta’s career trajectory can be seen on the graph on the left below, but this path is just one example of the type of trajectory a player’s career may take. Current Atlanta Brave <a href="https://www.baseball-reference.com/register/player.fcgi?id=smyly-001tod">Drew Smyly</a> has had a lot of variability in his success as a pitcher, as seen on the graph on the right. While his first four seasons appeared quite strong, Smyly performed below average 2016 and 2019 and since has had a little more success.</p>
<pre class="r"><code>seasonal_complete %&gt;%
  filter(Player == &quot;Jake Arrieta&quot;) %&gt;%
  ggplot(aes(x=Year, y=`ERA+`))+
  geom_point()+
  theme_classic()+
  labs(x=&quot;&quot;, title = &quot;Jake Arrieta&#39;s ERA+ over his career&quot;)+
  theme(plot.title.position = &quot;plot&quot;, 
        plot.title = element_text(family = &quot;mono&quot;, size = 12))+
  geom_smooth(method=&quot;loess&quot;, se=FALSE, color = &quot;azure3&quot;)
seasonal_complete %&gt;%
  filter(Player == &quot;Drew Smyly&quot;) %&gt;%
  ggplot(aes(x=Year, y=`ERA+`))+
  geom_point()+
  theme_classic()+
  labs(x=&quot;&quot;, title = &quot;Drew Smyly&#39;s ERA+ over his career&quot;)+
  theme(plot.title.position = &quot;plot&quot;, 
        plot.title = element_text(family = &quot;mono&quot;, size = 12))+
  ylim(c(50, 220))+
  geom_smooth(method = &quot;loess&quot;, se=FALSE, color = &quot;azure3&quot;)</code></pre>
<p><img src="index_files/figure-html/figures-side-1.png" width="50%" /><img src="index_files/figure-html/figures-side-2.png" width="50%" /></p>
<p>What might contribute to these pitching trends? While trends are incredibly complex and the result of many different factors, a major factor to pitching success is health. Notice Smyly’s missing stats in 2017 and 2018 - during this period, he underwent <a href="https://www.hopkinsmedicine.org/health/treatment-tests-and-therapies/tommy-john-surgery-ulnar-collateral-ligament-reconstruction">Tommy John surgery</a>. Tommy John surgery is a major surgery that repairs a torn ulnar collateral ligament in the elbow by replacing it with a tendon from another part of a player’s body. Recovery typically takes a year, but can take up to 2.<br />
</p>
<p>This analysis will seek to understand how the trajectory of a pitcher’s MLB success changes over the course of his career, with a focus especially on players who undergo Tommy John surgery at some point after their MLB debut. We will answer two questions in this study. First, how well can we predict whether or not a player will return from Tommy John surgery to play again at the major league level? Second, what correlates with an MLB starting pitcher’s seasonal success, and how does this seasonal success change over a player’s career? The goal of this analysis will be to help scouts make smarter decisions when drafting players and gain greater insight to if there are risks of drafting players that have undergone Tommy John surgery or may need Tommy John surgery in the future.</p>
</div>
<div id="data" class="section level2">
<h2>Data</h2>
<p>This analysis uses data from all players drafted since 1987, the first year that the Secondary January Amateur draft did not exist. Data for this analysis were collected from multiple sources. Information on each player’s draft round and year were collected from a GitHub source and checked for accuracy. Unfortunately, I can no longer find the webpage where I originally downloaded this data from. I then joined these data by player name and birth date with <a href="https://www.baseball-reference.com/leagues/majors/2021-debuts.shtml#all_misc_pitching">career level pitcher statistics and debut information from Baseball Reference</a>, which had to be downloaded individually for each season. Tommy John surgery information was obtained from <a href="https://mlbreports.com/tj-surgery/">MLB Reports</a>, and finally individual player data on the seasonal level were downloaded from <a href="https://stathead.com/baseball/season_finder.cgi?request=1&amp;match=single&amp;order_by=SO&amp;qualifiers=nomin&amp;minIpVal=162&amp;minDecVal=14&amp;mingamesVal=40&amp;year_min=1987&amp;year_max=2021&amp;lgs%5B%5D=AL&amp;lgs%5B%5D=NL&amp;type=p&amp;age_min=0&amp;age_max=99&amp;season_start=1&amp;season_end=-1&amp;games_started=60&amp;games_relieved=80&amp;location=pob&amp;locationMatch=is&amp;isHOF=either">Stathead Baseball</a>. The diversity of the downloaded data allowed me to create a database with a wide variety of variables, and enables the comparison between players as well as the analysis of a player’s development over the course of their career.</p>
<p>The main variables I will use in this analysis are displayed in the codebook below. They come from my final data set, which is called <code>seasonal_complete</code>. My process to create this data set is fully documented in the data cleaning section of this website.</p>
<pre class="r"><code>codebook = data.frame(Variable = c(&quot;Player&quot;, &quot;Year&quot;, &quot;Age&quot;, &quot;hs_draftee&quot;, &quot;birth_date&quot;, &quot;Debut&quot;, &quot;round&quot;, &quot;surgery1Year&quot;, &quot;statsTime&quot;, &quot;surgery1time&quot;, &quot;surgery_age&quot;, &quot;ERA+&quot;, &quot;G&quot;, &quot;GS&quot;, &quot;IP&quot;, &quot;WHIP&quot;, &quot;kRate&quot;), 
                      Meaning = c(&quot;name of pitcher&quot;, &quot;year of MLB season&quot;, &quot;player age during season&quot;, &quot;whether the player was drafted in high school&quot;, &quot;player date of birth&quot;, &quot;player MLB debut data&quot;, &quot;the player&#39;s draft round&quot;, &quot;the year the player had their first Tommy John surgery while in the MLB&quot;, &quot;whether the stats for this season come before or after the player&#39;s first surgery&quot;, &quot;whether the player&#39;s first surgery came before draft, between draft &amp; debut, or after debut&quot;, &quot;age of pitcher at first surgery&quot;, &quot;adjusts a pitcher&#39;s ERA according to the pitcher&#39;s ballpark and the ERA of the pitcher&#39;s league&quot;, &quot;games played&quot;, &quot;games started&quot;, &quot;innings pitched&quot;, &quot;number of walks + hits per inning pitched&quot;, &quot;average number of strikeouts per inning&quot;))
codebook %&gt;%
  gt() %&gt;%
  tab_header(
    title = md(&quot;**Codebook**&quot;)
  ) %&gt;%
  tab_style(
    style = cell_fill(color = &quot;honeydew&quot;),
    locations = cells_body(
      rows = Variable %in% c(&quot;Player&quot;, &quot;Age&quot;, &quot;birth_date&quot;, &quot;round&quot;, &quot;statsTime&quot;, &quot;surgery_age&quot;, &quot;G&quot;, &quot;IP&quot;, &quot;kRate&quot;))) %&gt;%
  tab_style(
    style = cell_fill(color = &quot;lightcyan3&quot;),
    locations = cells_body(
      rows = Variable %!in% c(&quot;Player&quot;, &quot;Age&quot;, &quot;birth_date&quot;, &quot;round&quot;, &quot;statsTime&quot;, &quot;surgery_age&quot;, &quot;G&quot;, &quot;IP&quot;, &quot;kRate&quot;))) %&gt;%
  tab_options(
    table.font.size = px(13L)
  )</code></pre>
<div id="xjdketyjcg" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#xjdketyjcg .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 13px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xjdketyjcg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xjdketyjcg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xjdketyjcg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xjdketyjcg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xjdketyjcg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xjdketyjcg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xjdketyjcg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xjdketyjcg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xjdketyjcg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xjdketyjcg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xjdketyjcg .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#xjdketyjcg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xjdketyjcg .gt_from_md > :first-child {
  margin-top: 0;
}

#xjdketyjcg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xjdketyjcg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xjdketyjcg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#xjdketyjcg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xjdketyjcg .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#xjdketyjcg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xjdketyjcg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xjdketyjcg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xjdketyjcg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xjdketyjcg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xjdketyjcg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#xjdketyjcg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xjdketyjcg .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#xjdketyjcg .gt_left {
  text-align: left;
}

#xjdketyjcg .gt_center {
  text-align: center;
}

#xjdketyjcg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xjdketyjcg .gt_font_normal {
  font-weight: normal;
}

#xjdketyjcg .gt_font_bold {
  font-weight: bold;
}

#xjdketyjcg .gt_font_italic {
  font-style: italic;
}

#xjdketyjcg .gt_super {
  font-size: 65%;
}

#xjdketyjcg .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border" style><strong>Codebook</strong></th>
    </tr>
    
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Variable</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">Meaning</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">Player</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">name of pitcher</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">Year</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">year of MLB season</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">Age</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">player age during season</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">hs_draftee</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">whether the player was drafted in high school</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">birth_date</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">player date of birth</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">Debut</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">player MLB debut data</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">round</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">the player's draft round</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">surgery1Year</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">the year the player had their first Tommy John surgery while in the MLB</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">statsTime</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">whether the stats for this season come before or after the player's first surgery</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">surgery1time</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">whether the player's first surgery came before draft, between draft &amp; debut, or after debut</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">surgery_age</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">age of pitcher at first surgery</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">ERA+</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">adjusts a pitcher's ERA according to the pitcher's ballpark and the ERA of the pitcher's league</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">G</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">games played</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">GS</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">games started</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">IP</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">innings pitched</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #B4CDCD;">WHIP</td>
<td class="gt_row gt_left" style="background-color: #B4CDCD;">number of walks + hits per inning pitched</td></tr>
    <tr><td class="gt_row gt_left" style="background-color: #F0FFF0;">kRate</td>
<td class="gt_row gt_left" style="background-color: #F0FFF0;">average number of strikeouts per inning</td></tr>
  </tbody>
  
  
</table>
</div>
<p><br />
</p>
</div>
<div id="understanding-career-trajectory" class="section level2">
<h2>Understanding career trajectory</h2>
<div id="age-distribution" class="section level3">
<h3>Age distribution</h3>
<p>In understanding career trajectory and longevity, we should first understand the age distribution of players in the MLB. Using all pitchers that played in the 2021 season, we get the following age distribution and see most pitchers are aged between their low twenties and low thirties.<br />
</p>
<pre class="r"><code>seasonal_complete %&gt;%
  filter(Year == 2021) %&gt;%
  ggplot(aes(x=Age))+
  geom_density(fill = &quot;lightcyan3&quot;)+
  theme_classic()+
  labs(title = &quot;Age distribution of pitchers in the MLB&quot;, x=&quot;Age&quot;, y=&quot;&quot;)+
  theme(plot.title.position = &quot;plot&quot;, 
        plot.title = element_text(family = &quot;mono&quot;, size = 11), 
        axis.title.x = element_text(family = &quot;mono&quot;, size = 11))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="career-length" class="section level3">
<h3>Career length</h3>
<p><br />
In trying to understand the impact of having Tommy John surgery on a player’s career, we should seek to understand if there are differences in <strong>career length</strong> for players that receive the surgery. To do this, we compare the career length in seasons of players that did not have surgery at any point in their career to those that had surgery between their draft and debut date. We remove players that had surgery in the MLB for this graph - the fact that they made it far enough in their MLB career to have a surgery during it is an indicator of career length. Additionally, we do not include players that had surgery before being drafted as scouts deemed them worthy enough to be drafted despite their surgery. When looking at the graph, there do not seem to be any significant differences.<br />
</p>
<pre class="r"><code>seasonal_complete %&gt;%
  filter(surgery1time %!in% c(&quot;after debut&quot;, &quot;before draft&quot;)) %&gt;%
  mutate(surgery1time = case_when(surgery1time == &quot;between draft and debut&quot; ~ &quot;between draft and debut&quot;, 
                                  TRUE ~ &quot;no surgery&quot;)) %&gt;%
  group_by(Player, surgery1time) %&gt;%
  summarize(n = n(), lastyear = max(Year)) %&gt;%
  filter(lastyear &lt; 2020) %&gt;%
  ggplot(aes(x=n, fill=surgery1time))+
  geom_density(alpha = 0.5)+
  theme_classic()+
  scale_fill_manual(values = c(&quot;deepskyblue4&quot;, &quot;sienna2&quot;))+
  labs(x=&quot;career length (seasons)&quot;, y=&quot;&quot;, title = &quot;MLB career length (seasons) averages similar length for players that&lt;strong&gt;&lt;span style=&#39;color:sienna2&#39;&gt; didn&#39;t have Tommy John&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;, subtitle = &quot;&lt;strong&gt;&lt;span style=&#39;color:sienna2&#39;&gt; surgery before debuting &lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;in comparison to &lt;strong&gt;&lt;span style=&#39;color:deepskyblue4&#39;&gt;those that had surgery between draft and debut&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;)+
  theme(plot.title = element_markdown(size = 9, family = &quot;mono&quot;),
        plot.subtitle = element_markdown(size = 9, family = &quot;mono&quot;), 
        plot.title.position = &quot;plot&quot;,
        legend.position = &quot;none&quot;, 
        axis.title.x = element_text(family = &quot;mono&quot;, size = 9))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="performance" class="section level3">
<h3>Performance</h3>
<p><br />
For players having their first Tommy John surgery following their MLB debut, it could be interesting to understand how their performance compares before versus after their surgery. In the following graph, we can notice that players average more innings following their surgery if it is done while they are younger. On the other hand, as players age into their thirties they almost always average fewer innings after the surgery. Players that did not play following their surgery are shown in red, but this trend holds even just looking at the blue dots, which represent players that play again after their surgery.<br />
</p>
<pre class="r"><code>diffIP &lt;- seasonal_complete %&gt;%
  filter(surgery1time == &quot;after debut&quot;) %&gt;%
  group_by(Player, statsTime) %&gt;%
  summarize(avg_IP = round(mean(IP),2), 
            surgery_age = time_length(difftime(`Surgery 1`, birth_date), &quot;years&quot;)) %&gt;%
  select(Player, surgery_age, statsTime, avg_IP) %&gt;%
  distinct() %&gt;%
  pivot_wider(id_cols = Player:surgery_age, names_from = statsTime, values_from = avg_IP) 

diffIP$after &lt;- replace_na(diffIP$after, 0)

diffIP %&gt;%
  mutate(difference = after - before, 
         leaveMLB = case_when(after == 0 ~ &quot;leave MLB&quot;, 
                              TRUE ~ &quot;continue playing&quot;)) %&gt;%
  ggplot(aes(x=surgery_age, y= difference, color = leaveMLB))+
  geom_point()+
  theme_classic()+
  geom_hline(yintercept = 0, linetype = &quot;dashed&quot;, color = &quot;red&quot;) %&gt;%
  labs(title = &quot;Pitchers tend to average fewer seasonal innings post Tommy John surgery than prior to it&quot;, subtitle = &quot;Players that leave the MLB completely are shown in&lt;strong&gt;&lt;span style=&#39;color:red&#39;&gt; red&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;, x = &quot;surgery age&quot;, y = &quot;Average seasonal IP after - before surgery&quot;)+
  theme(plot.title = element_markdown(size = 9, family = &quot;mono&quot;),
        plot.subtitle = element_markdown(size = 9, family = &quot;mono&quot;),
        plot.title.position = &quot;plot&quot;, 
        axis.title.x = element_markdown(size = 8, family = &quot;mono&quot;), 
        axis.title.y = element_markdown(size = 8, family = &quot;mono&quot;),
        legend.position = &quot;none&quot;)+
  geom_hline(yintercept = 0, linetype = &quot;dashed&quot;, color = &quot;black&quot;) +
  scale_color_manual(values = c(&quot;navy&quot;, &quot;red&quot;))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
</div>
<div id="playing-after-tommy-john-surgery" class="section level2">
<h2>Playing after Tommy John surgery</h2>
<p><br />
Tommy John surgery is a major procedure to go through, and thus it is not certain that a pitcher will return to the MLB following this surgery. For the 318 pitchers in this study that received Tommy John surgery following their MLB debut, 233 (73.27%) of them returned to the MLB to play again. These 318 pitchers all had the surgery prior to 2020, as many of those that received the surgery in 2020 and certainly in 2021 will not yet have recovered and returned major league baseball.</p>
<pre class="r"><code>#filter for players that had surgery after their debut but in years prior to 2020. Group by player and summarize their number of seasons after and before surgery, as well as create an indicator variable for if they play after surgery. 
play_post_surgery &lt;- seasonal_complete %&gt;%
  filter(surgery1time == &quot;after debut&quot;, surgery1Year &lt; 2020) %&gt;%
  group_by(Player) %&gt;%
  count(statsTime) %&gt;%
  pivot_wider(id_cols = Player, names_from = statsTime, values_from = n) %&gt;%
  mutate(played_after = case_when(is.na(after) == TRUE ~ 0, 
                                  TRUE ~ 1))

# 73.27% of players play following their surgery
play_post_surgery %&gt;% 
  tabyl(played_after)

#join with seasonal complete to get more information about these players. Currently, the data is no longer grouped by player. 
seasonal_SurgPostdebut &lt;- seasonal_complete %&gt;%
  filter(surgery1time == &quot;after debut&quot;, surgery1Year &lt; 2020) %&gt;%
  left_join(play_post_surgery, by = &quot;Player&quot;)

#filter for seasonal stats before surgery. Eliminate any WHIPS of Inf. Group by player and find their age at surgery. 
stats &lt;- seasonal_SurgPostdebut %&gt;%
  filter(statsTime == &quot;before&quot;, WHIP &lt; 100) %&gt;%
  group_by(Player) %&gt;%
  mutate(surgery_age = time_length(difftime(`Surgery 1`, birth_date), &quot;years&quot;), 
         games_started = sum(GS), 
         games = sum(G), 
         starter = case_when(games_started/games &lt; 0.5 ~ 0, 
                                TRUE ~ 1), 
         starter = as.factor(starter), 
         totalIP = sum(IP),
         kRate = case_when(totalIP &gt;=1 ~ sum(SO)/totalIP, 
                           TRUE ~ sum(SO)), #prevents krate of 5 for player that had one strikeout and pitched 0.2 innings
         totwalks = sum(BB), 
         totH = sum(H), 
         avgWHIP = (totwalks+totH)/totalIP, 
         played_after = as.factor(played_after)) %&gt;%
  select(hs_draftee, played_after, surgery_age, starter, kRate, totalIP, avgWHIP) %&gt;%
  distinct()</code></pre>
<div id="exploratory-data-analysis" class="section level3">
<h3>Exploratory Data Analysis</h3>
<p><br />
If a team has a player decide to undergo Tommy John surgery, or is debating signing a player needing surgery, it would be helpful to understand what might be correlated with a player returning to the majors following their surgery.<br />
</p>
<p>A few possible performance based variables to look into could be the pitcher’s <strong>average strikeout rate</strong> and <strong>average WHIP</strong>, as well as <strong>total innings pitched</strong> prior to the surgery. We see that pitchers that return to the MLB tend to have slightly lower (better) WHIPs and slightly higher (better) strikeout rates. Additionally, the innings pitched variable appears highly informative. 75.29% of the pitchers that did not return to the MLB pitched fewer than 200 innings prior to their surgery. In comparison, only 51.5% of the pitchers that played after pitched less than 200 innings.</p>
<pre class="r"><code>#understand relationship between 200 innings pitched prior to surgery and return to MLB rate
stats %&gt;%
  mutate(manyIP = case_when(totalIP &gt;= 200 ~ &quot;high&quot;, 
                            TRUE ~ &quot;low&quot;)) %&gt;%
  group_by(manyIP, played_after) %&gt;%
  count()</code></pre>
<pre class="r"><code>#create graph for relationship between average WHIP and playing after surgery
stats %&gt;%
  filter(avgWHIP &lt; 2.5, avgWHIP &gt; 0.5) %&gt;%
  ggplot(aes(x=avgWHIP, fill = played_after))+
  geom_density(alpha=0.5) +
  theme_classic()+
  labs(x= &quot;average WHIP&quot;, y = &quot;&quot;, title = &quot;Average WHIP prior to Tommy John surgery comparing pitchers&quot;, subtitle =  &quot;that &lt;strong&gt;&lt;span style=&#39;color:navy&#39;&gt;play again&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt; versus &lt;strong&gt;&lt;span style=&#39;color:red&#39;&gt;don&#39;t&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;)+
  scale_fill_manual(values = c(&quot;navy&quot;, &quot;red&quot;))+
  theme(axis.text.y = element_blank(),
        axis.ticks.y = element_blank(), 
        plot.title.position = &quot;plot&quot;, 
        plot.title = element_markdown(family = &quot;mono&quot;, size =14),
        plot.subtitle = element_markdown(family = &quot;mono&quot;, size =14),
        legend.position = &quot;none&quot;, 
        axis.title.x = element_markdown(family=&quot;mono&quot;, size=11))

#create graph for relationship between average strikeout rate and playing after surgery
stats %&gt;%
  ggplot(aes(x=kRate, fill = played_after))+
  geom_density(alpha=0.5) +
  theme_classic()+
  labs(x= &quot;strikeout rate per inning&quot;, y = &quot;&quot;, title = &quot;Average K rate prior to Tommy John surgery comparing pitchers&quot;,  subtitle = &quot;that &lt;strong&gt;&lt;span style=&#39;color:navy&#39;&gt;play again&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt; versus &lt;strong&gt;&lt;span style=&#39;color:red&#39;&gt;don&#39;t&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;)+
  scale_fill_manual(values = c(&quot;navy&quot;, &quot;red&quot;))+
  theme(axis.text.y = element_blank(),
        axis.ticks.y = element_blank(), 
        plot.title.position = &quot;plot&quot;, 
        plot.title = element_markdown(family = &quot;mono&quot;, size =14), 
        plot.subtitle = element_markdown(family = &quot;mono&quot;, size =14), 
        legend.position = &quot;none&quot;, 
        axis.title.x = element_markdown(family=&quot;mono&quot;, size=11))</code></pre>
<p><img src="index_files/figure-html/figures-side2-1.png" width="50%" /><img src="index_files/figure-html/figures-side2-2.png" width="50%" /></p>
<pre class="r"><code>#create graph for relationship between total innings pitched and playing after surgery
stats %&gt;%
  ggplot(aes(x=totalIP, fill = played_after))+
  geom_density(alpha=0.5) +
  theme_classic()+
  labs(x= &quot;total IP&quot;, y = &quot;&quot;, title = &quot;Total IP prior to Tommy John surgery comparing players that &lt;strong&gt;&lt;span style=&#39;color:navy&#39;&gt;play again&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt; versus &lt;strong&gt;&lt;span style=&#39;color:red&#39;&gt;don&#39;t&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;)+
  scale_fill_manual(values = c(&quot;navy&quot;, &quot;red&quot;))+
  theme(axis.text.y = element_blank(),
        axis.ticks.y = element_blank(), 
        plot.title.position = &quot;plot&quot;, 
        plot.title = element_markdown(family = &quot;mono&quot;, size =10), 
        legend.position = &quot;none&quot;, 
        axis.title.x = element_markdown(family=&quot;mono&quot;, size=9))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p><br />
In addition to performance metrics, we can see if there is any relationship between a pitcher playing after their surgery and their role (starter or reliever) as well as whether they were a high school draftee.</p>
<pre class="r"><code># create mosiac plot showing relationship between starter versus reliever and results of playing again
stats %&gt;%
  mutate(starter = recode(starter, &quot;0&quot; = &quot;reliever&quot;, &quot;1&quot; = &quot;starter&quot;)) %&gt;%
  ggplot()+
  geom_mosaic(aes(x = product(played_after,starter), fill = played_after), alpha = 0.7)  +
  labs(x= &quot;&quot;, y = &quot;&quot;, title = &quot;Starters &lt;strong&gt;&lt;span style=&#39;color:navy&#39;&gt;play after surgery&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt; more often than relievers&quot;)+
  scale_fill_manual(values = c(&quot;navy&quot;, &quot;red&quot;)) + 
  theme_classic()+
  theme(axis.text.y = element_blank(), 
        axis.ticks.y = element_blank(), 
        plot.title = element_markdown(family = &quot;mono&quot;, size =13), 
        legend.position = &quot;none&quot;, 
        axis.text.x = element_markdown(family = &quot;mono&quot;, size = 11))

# create mosiac plot showing relationship between high school draftee indicator and results of playing again
stats %&gt;%
  mutate(hs_draftee = case_when(hs_draftee == TRUE ~ &quot;high school&quot;, 
                                hs_draftee == FALSE ~ &quot;college/international&quot;)) %&gt;%
  ggplot()+
  geom_mosaic(aes(x = product(played_after,hs_draftee), fill = played_after), alpha = 0.7)  +
  labs(x= &quot;&quot;, y = &quot;&quot;, title = &quot;High school draftees &lt;strong&gt;&lt;span style=&#39;color:navy&#39;&gt;play after surgery&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt; slightly more often&quot;, subtitle = &quot;than college or international picks&quot;)+
  scale_fill_manual(values = c(&quot;navy&quot;, &quot;red&quot;)) + 
  theme_classic()+
  theme(axis.text.y = element_blank(), 
        axis.ticks.y = element_blank(), 
        plot.title = element_markdown(family = &quot;mono&quot;, size =13), 
        plot.subtitle = element_markdown(family = &quot;mono&quot;, size =13),
        legend.position = &quot;none&quot;, 
        axis.text.x = element_markdown(family = &quot;mono&quot;, size = 11))</code></pre>
<p><img src="index_files/figure-html/figures-side3-1.png" width="50%" /><img src="index_files/figure-html/figures-side3-2.png" width="50%" /></p>
<p>A final variable to investigate is the age at which the player is having the Tommy John surgery. Below, we see that pitchers that pitch again tend to be slightly younger in age at the time of their surgery in comparison to those that do not play again. However, this difference is not quite as substantial as one might have originally thought.</p>
<pre class="r"><code>stats %&gt;%
  ggplot(aes(x=surgery_age, fill = played_after))+
  geom_density(alpha=0.5) +
  theme_classic()+
  labs(x= &quot;surgery age&quot;, y = &quot;&quot;, title = &quot;Surgery age comparing players that &lt;strong&gt;&lt;span style=&#39;color:navy&#39;&gt;play again&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt; versus &lt;strong&gt;&lt;span style=&#39;color:red&#39;&gt;don&#39;t&lt;/span&gt;&lt;/strong&gt;&lt;/b&gt;&quot;)+
  scale_fill_manual(values = c(&quot;navy&quot;, &quot;red&quot;))+
  theme(axis.text.y = element_blank(),
        axis.ticks.y = element_blank(), 
        plot.title.position = &quot;plot&quot;, 
        plot.title = element_markdown(family = &quot;mono&quot;, size =12), 
        legend.position = &quot;none&quot;, 
        axis.title.x = element_markdown(family=&quot;mono&quot;, size = 11))</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
<div id="model-introduction-and-priors" class="section level3">
<h3>Model Introduction and Priors</h3>
<p>Having a basic understanding of some of these variables, we can now build a logistic regression model. In building this model, we will let <span class="math inline">\(Y\)</span> be a binary indicator of if the pitcher plays again at the MLB level following his Tommy John surgery, which occurs at probability <span class="math inline">\(\pi\)</span>. Understanding the results of the exploratory data analysis, this model will utilize the following predictors:<br />
</p>
<ul>
<li><span class="math inline">\(X_1\)</span>: indicator variable for if a player is a <strong>starter</strong> (1) or <strong>reliever</strong> (0)<br />
</li>
<li><span class="math inline">\(X_2\)</span>: continuous variable representing the <strong>total number of innings pitched</strong> by a player prior to their surgery<br />
</li>
<li><span class="math inline">\(X_3\)</span>: continuous variable representing the player’s <strong>average WHIP</strong> prior to their surgery<br />
</li>
<li><span class="math inline">\(X_4\)</span>: indicator variable of if a player was a <strong>high school draftee</strong><br />
</li>
<li><span class="math inline">\(X_5\)</span>: continuous variable representing a pitcher’s <strong>strikeout rate</strong> prior to their surgery<br />
</li>
<li><span class="math inline">\(X_6\)</span>: continuous variable for the <strong>age at which a player got surgery</strong><br />
</li>
</ul>
<p>Starting with the centered intercept <span class="math inline">\(\beta_{0c}\)</span>, we recall our prior understanding that for the average player there is roughly a 73% chance of rain, i.e. <span class="math inline">\(\pi \approx 0.73\)</span>. As a result, we can set the prior mean for <span class="math inline">\(\beta_{0c}\)</span> on the <em>log(odds)</em> scales to 1:<br />
</p>
<span class="math display">\[\begin{split}
\log\left(\frac{\pi}{1-\pi}\right) = \log\left(\frac{0.73}{1-0.27}\right) \approx 1  .
\end{split}\]</span>
<p>Setting a range for this normal prior, we have a vague understanding of the <em>log(odds of returning)</em> ranges from roughly 0.3 to 1.7 <span class="math inline">\((1 \pm 2*0.35)\)</span>. In other words, the odds of a typical pitcher playing after at the MLB level following surgery could be somewhere between:</p>
<span class="math display">\[\begin{split}
(e^{0.3}, e^{1.7}) \approx (1.35, 5.474)
\end{split}\]</span>
Thus the <em>probability</em> of the average pitcher returning to pitch at the MLB level could be somewhere between about 0.57 and 0.85:<br />

<span class="math display">\[\begin{split}
\left(\frac{1.35}{1 + 1.35}, \frac{5.474}{1 + 5.474}\right) \approx (0.5747, 0.8455).
\end{split}\]</span>
<p>We have only a very basic understanding of each predictor’s relationship with a player’s likelihood of returning to pitch at the MLB level and thus will utilize weakly informative priors for these coefficients. As a result, their coefficients are centered at 0 and they have a fairly wide standard deviation. As a whole, the model can be summarized as:<br />
</p>
<span class="math display">\[\begin{array}{lcrl} 
\text{data:} &amp; \hspace{.01in} &amp; Y_i|\beta_0,\beta_1 &amp; \stackrel{ind}{\sim} \text{Bern}(\pi_i) \;\; \text{ with } \;\; \log\left(\frac{\pi_i}{1 - \pi_i}\right) = \beta_0 + \beta_1 X_{i1} + \beta_2 X_{i2} + \beta_3 X_{i3} + \beta_4 X_{i4} + \beta_5 X_{i5} + \beta_6 X_{i6}\\
\text{priors:} &amp; &amp; \beta_{0c}  &amp;  \sim N\left(1, 0.35^2 \right)  \\
               &amp; &amp; \beta_1  &amp; \sim N\left(0, 5.0164^2 \right) \\
               &amp; &amp; \beta_2  &amp; \sim N\left(0, 0.00585^2 \right) \\
               &amp; &amp; \beta_3  &amp; \sim N\left(0, 8.036^2 \right) \\
               &amp; &amp; \beta_4  &amp; \sim N\left(0, 5.5438^2 \right) \\
               &amp; &amp; \beta_5  &amp; \sim N\left(0, 10.8088^2 \right) \\
               &amp; &amp; \beta_6  &amp; \sim N\left(0, 0.74858^2 \right) \\
\end{array}\]</span>
<pre class="r"><code>stats_clean &lt;- stats %&gt;%
  mutate(played_after = relevel(played_after, ref=&#39;0&#39;), 
         starter = relevel(starter, ref=&#39;0&#39;)) %&gt;%
  filter(avgWHIP &lt; 3.5)
played_after_mod &lt;- stan_glm(played_after ~ starter + totalIP + avgWHIP + hs_draftee + kRate + surgery_age,
                             data = stats_clean, family = binomial,
                             prior_intercept = normal(1, 0.35),
                             prior = normal(0, 2.5, autoscale = TRUE),
                             chains = 4, iter = 5000*2, seed = 84735, refresh=0)

prior_summary(played_after_mod)$prior_intercept
prior_summary(played_after_mod)$prior</code></pre>
<p>This model uses 315 out of the 318 pitchers that had Tommy John surgery following their major league debut. Three pitchers - Joe Mantiply, Jack Egbert, and Erik Bedard - were removed as their WHIPs were large outliers (all over 4) due to each pitching fewer than three MLB innings before their Tommy John surgery. With these three included in the model, the 80% credible interval on WHIP was almost entirely positive, indicating that as pitchers perform worse their likelihood of returning to the MLB after surgery rises. While Mantiply, Egbert, and Bedard interestingly enough all did return to pitch at the MLB level following their Tommy John surgery, the overall trend that we saw in the density plots indicates that better performing pitchers return more after surgery and thus our model should capture that.</p>
<pre class="r"><code># check out the players that had outlier WHIPs
stats %&gt;%
  filter(avgWHIP &gt; 3.5)</code></pre>
</div>
<div id="check-the-diagnostics" class="section level3">
<h3>Check the diagnostics</h3>
<p>Before getting into the results of the model, we should check the diagnostics of the simulation. The model above was run using <strong>Markov Chain Monte Carlo simulation</strong> techniques. This process enables us to estimate the posterior of our classification model and get a better understanding of what might contribute to a pitcher returning to the MLB following their surgery. However, not all simulations are perfect. We are looking for Markov chains that roam the sample space of <span class="math inline">\(\pi\)</span> and in the end imitate a random sample that converges to the posterior. To assess if our simulation does this, we can look at <strong>trace plots</strong>, <strong>compare parallel chains</strong>, and assess <strong>autocorrelation</strong>.</p>
<p>The set of plots below on the left shows the <strong>trace plots</strong> for our simulation. These plots have no discernible trends or patterns, which is what we want - this implies that our Markov chains are stable. The set of plots below on the right <strong>compare parallel chains</strong>. In these plots we are looking for consistency across the four chains, which we definitely have. This provides evidence that our simulation is stable and long enough. Additionally, while the <strong>autocorrelation plots</strong> are not shown here due to there being so many of them, they showed our Markov chain sufficiently mimics the behavior of an independent sample (which is what we want).</p>
<pre class="r"><code>mcmc_trace(played_after_mod)
mcmc_dens_overlay(played_after_mod)+
  ylab(&quot;density&quot;)</code></pre>
<p><img src="index_files/figure-html/figures-side4-1.png" width="50%" /><img src="index_files/figure-html/figures-side4-2.png" width="50%" /></p>
</div>
<div id="model-results" class="section level3">
<h3>Model results</h3>
<p>Now that our simulation has proven itself reliable, we can check out the coefficients of our model. Using an 80% confidence interval, we see that a pitcher’s <strong>total innings pitched</strong>, <strong>strikeout rate</strong>, and <strong>surgery age</strong> are significant variables in predicting whether they will pitch again at the MLB level. On the other hand, the high school draftee indicator variable and average WHIP are not significant variables. Whether or not a player is a starter or reliever is borderline significant as the lowest end of the confidence interval is just slightly negative, indicating it is reasonable to assume that starters are more likely to return to play the MLB level holding all other variables constant.</p>
<pre class="r"><code>tidy(played_after_mod, effects = &quot;fixed&quot;, conf.int = TRUE, conf.level = 0.80) %&gt;%
  mutate(estimate = round(estimate, 6), 
         std.error = round(std.error, 4), 
         conf.low = round(conf.low, 6), 
         conf.high = round(conf.high, 6)) %&gt;%
  gt() %&gt;%
  tab_header(
    title = md(&quot;**Model results**&quot;)
  ) </code></pre>
<div id="thdzbxqdrt" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#thdzbxqdrt .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#thdzbxqdrt .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#thdzbxqdrt .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#thdzbxqdrt .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#thdzbxqdrt .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#thdzbxqdrt .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#thdzbxqdrt .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#thdzbxqdrt .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#thdzbxqdrt .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#thdzbxqdrt .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#thdzbxqdrt .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#thdzbxqdrt .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#thdzbxqdrt .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#thdzbxqdrt .gt_from_md > :first-child {
  margin-top: 0;
}

#thdzbxqdrt .gt_from_md > :last-child {
  margin-bottom: 0;
}

#thdzbxqdrt .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#thdzbxqdrt .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#thdzbxqdrt .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#thdzbxqdrt .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#thdzbxqdrt .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#thdzbxqdrt .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#thdzbxqdrt .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#thdzbxqdrt .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#thdzbxqdrt .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#thdzbxqdrt .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#thdzbxqdrt .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#thdzbxqdrt .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#thdzbxqdrt .gt_left {
  text-align: left;
}

#thdzbxqdrt .gt_center {
  text-align: center;
}

#thdzbxqdrt .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#thdzbxqdrt .gt_font_normal {
  font-weight: normal;
}

#thdzbxqdrt .gt_font_bold {
  font-weight: bold;
}

#thdzbxqdrt .gt_font_italic {
  font-style: italic;
}

#thdzbxqdrt .gt_super {
  font-size: 65%;
}

#thdzbxqdrt .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  <thead class="gt_header">
    <tr>
      <th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border" style><strong>Model results</strong></th>
    </tr>
    
  </thead>
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">term</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">estimate</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">std.error</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.low</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">conf.high</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">(Intercept)</td>
<td class="gt_row gt_right">4.560101</td>
<td class="gt_row gt_right">2.0413</td>
<td class="gt_row gt_right">1.948821</td>
<td class="gt_row gt_right">7.218393</td></tr>
    <tr><td class="gt_row gt_left">starter1</td>
<td class="gt_row gt_right">0.409641</td>
<td class="gt_row gt_right">0.3503</td>
<td class="gt_row gt_right">-0.032597</td>
<td class="gt_row gt_right">0.858654</td></tr>
    <tr><td class="gt_row gt_left">totalIP</td>
<td class="gt_row gt_right">0.002558</td>
<td class="gt_row gt_right">0.0008</td>
<td class="gt_row gt_right">0.001635</td>
<td class="gt_row gt_right">0.003577</td></tr>
    <tr><td class="gt_row gt_left">avgWHIP</td>
<td class="gt_row gt_right">-0.101489</td>
<td class="gt_row gt_right">0.4590</td>
<td class="gt_row gt_right">-0.686720</td>
<td class="gt_row gt_right">0.486679</td></tr>
    <tr><td class="gt_row gt_left">hs_drafteeTRUE</td>
<td class="gt_row gt_right">0.197468</td>
<td class="gt_row gt_right">0.3400</td>
<td class="gt_row gt_right">-0.235632</td>
<td class="gt_row gt_right">0.639926</td></tr>
    <tr><td class="gt_row gt_left">kRate</td>
<td class="gt_row gt_right">1.467364</td>
<td class="gt_row gt_right">0.6269</td>
<td class="gt_row gt_right">0.665150</td>
<td class="gt_row gt_right">2.260704</td></tr>
    <tr><td class="gt_row gt_left">surgery_age</td>
<td class="gt_row gt_right">-0.197175</td>
<td class="gt_row gt_right">0.0616</td>
<td class="gt_row gt_right">-0.278644</td>
<td class="gt_row gt_right">-0.118299</td></tr>
  </tbody>
  
  
</table>
</div>
<p><br />
Looking at the significant coefficients, we understand that:<br />
</p>
<ul>
<li>For every additional 100 total innings a player has pitched prior to his surgery, there is an 80% posterior chance that the odds of him returning to the pitch at the MLB level following the surgery increase by somewhere between 17.8% and 43% holding all other variables constant: <span class="math inline">\((e^{0.001635*100}, e^{0.003577*100}) = (1.178, 1.43)\)</span>.<br />
</li>
<li>For every additional strikeout per nine inning pitched a player has prior to his surgery, there’s an 80% posterior chance the odds of him returning to pitch at the MLB level following the surgery increase by somewhere between 7.7% and 28.6% holding all other variables constant: <span class="math inline">\((e^{0.665150*\frac{1}{9}}, e^{2.260704*\frac{1}{9}}) = (1.077, 1.286)\)</span>.<br />
</li>
<li>For every year older that a player gets when he has surgery, we estimate there is an 80% posterior chance that the odds of him returning to pitch at the MLB level are multiplied by a factor of 75.68% to 88.84% holding all other variables constant: <span class="math inline">\((e^{-0.278644}, e^{-0.118299}) = (0.7568, 0.8884)\)</span>.</li>
</ul>
</div>
<div id="using-the-model" class="section level3">
<h3>Using the model</h3>
<p>With a model, we can now use it in context. For example, suppose we wanted to predict whether or not <a href="https://www.baseball-reference.com/players/g/glasnty01.shtml">Tyler Glasnow</a> will return to play again at the MLB level following his Tommy John surgery that occurred on August 4, 2021. Glasnow is currently a starter for the Tampa Bay Rays. Up until his surgery, he has averaged a WHIP of 1.248, 1.255 strikeouts per inning, and has pitched 403 innings. He was drafted out of high school and had surgery at age 27.948. To predict whether Glasnow will return to the MLB, we can approximate the posterior predictive model for the binary outcomes of <span class="math inline">\(Y\)</span>, whether the pitcher plays again, where</p>
<span class="math display">\[\begin{split}
Y | \beta_0, \beta_1, \beta_2, \beta_3, \beta_4, \beta_5, \beta_6 \sim \text{Bern}(\pi) \;\; \text{ with } \;\; \log\left( \frac{\pi}{1-\pi}\right) = \beta_0 + \beta_1 * 1 + \beta_2 * 403 + \beta_3 * 1.248 + \beta_4 * 1 + \beta_5 * 1.255 + \beta_6 * 27.948
\end{split}\]</span>
<p>We can simulate 20,000 posterior predictions of <span class="math inline">\(Y\)</span> and learn 91.085% of them call for Glasnow to return to the MLB, making it reasonable to predict he will return after recovering from his surgery.</p>
<pre class="r"><code># Posterior predictions of binary outcome
set.seed(84735)
binary_prediction &lt;- posterior_predict(
  played_after_mod, newdata = data.frame(starter=&quot;1&quot;, totalIP = 403, avgWHIP=1.248, hs_draftee = TRUE, kRate=1.255, surgery_age = 27.948))

table(binary_prediction)
colMeans(binary_prediction)</code></pre>
</div>
<div id="model-evaluation" class="section level3">
<h3>Model evaluation</h3>
<p>To evaluate our classification model, we will ask three questions.</p>
<p><strong>First, how fair is the model?</strong><br />
While some of this information seems pretty private (e.g. when a pitcher has surgery and his age), this is all public data available and players know that their information being public is part of what comes with being a MLB player. Thus, while we cannot ask all players whether they are okay with their information being used in this model, we will assume it okay.</p>
<p><strong>Second, how wrong is the model?</strong><br />
We can complete a posterior predictive check to justify that data simulated from our posterior logistic regression model has characteristics similar to the original data. If this is the case, we can confirm that the assumptions behind our Bayesian logistic regression model (normal priors are appropriate and there is independence between priors) are reasonable. To complete this posterior predictive check, we record the proportion of outcomes <span class="math inline">\(Y\)</span> that are 1 (the proportion of players that play again) from each of 100 posterior simulated datasets. The histogram below of these simulated “play after surgery” rates confirms that they are consistent with the original data.</p>
<pre class="r"><code>proportion_again &lt;- function(x){mean(x == 1)}
pp_check(played_after_mod, nreps = 100,
         plotfun = &quot;stat&quot;, stat = &quot;proportion_again&quot;) + 
  xlab(&quot;probability of playing after surgery&quot;)</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><strong>Third and finally, how accurate are our posterior classifications?</strong><br />
In the classification setting where we are predicting whether a pitcher returns to pitch again at the MLB following his surgery, we are interested if our classifications of <span class="math inline">\(Y\)</span> are right or wrong, specifically how often we are right. Thinking about the perspective of a scout of a team, we would probably prefer a model that is highly accurate at identifying players that <em>will not</em> return to play again at the major league level after surgery, as signing these players could lead to large losses as the team gets to return out of them. In that case, we would want a model that favors <em>specificity</em> over <em>sensentivity</em>, meaning we more accurately predict the result correctly for players that <em>do not</em> play again than for players that do. However, it is important to recognize making this sacrifice will hurt our overall model accuracy a bit.</p>
<p>Taking this all into account, our final model will predict a pitcher will return to the MLB after their surgery only if their posterior predicted probability is greater than 72%. Evaluating our model with this classification cutoff on cross-validated data, we see that our model is overall 64% accurate with a specificity of 68.7% and a sensitivity of 63.56%. Unfortunately, this overall accuracy is lower than the <em>no-information rate</em> of our data. The no-information rate is the accuracy we would get if we simply always predicted the majority outcome. In this case, that would mean predicting that a pitcher always returns to play again in the MLB and would give us an accuracy of 73%. The negative of this is our sensitivity (the proportion of players who do not return to the MLB that we predicted correctly) would be 0. So white our model is not as accurate as we might hope, we will go with it and hopefully make further improvements in the future.</p>
<pre class="r"><code>set.seed(84735)
cv_accuracy &lt;- classification_summary_cv(
  model = played_after_mod, data = stats_clean, cutoff = 0.72, k = 10)
cv_accuracy$cv</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
